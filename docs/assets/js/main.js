"use strict";let day=document.querySelector(".js-day"),month=document.querySelector(".js-month"),year=document.querySelector(".js-year"),weekDay=document.querySelector(".js-weekDay");const addButton=document.querySelector(".js-btn"),closeButton=document.querySelector(".js-close"),submitButton=document.querySelector(".js-submit"),mainContainer=document.querySelector(".js-list"),taskForm=document.querySelector(".js-form"),inputText=document.querySelector(".js-input"),taskContainer=document.createElement("ul");mainContainer.appendChild(taskContainer);let inputValue="",taskList=[];const localStorageName="tasks",months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDays=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],date=new Date;day.innerHTML=date.getDate(),month.innerHTML=months[date.getMonth()],year.innerHTML=date.getFullYear(),weekDay.innerHTML=weekDays[date.getDay()];const createElements=()=>{if(""!==inputValue){const e=document.createElement("input");e.classList.add("checkbox"),e.setAttribute("type","checkbox"),e.setAttribute("name",inputValue);const t=document.createElement("span");t.classList.add("custom-check"),t.setAttribute("name",inputValue);const s=document.createElement("label");s.classList.add("task-label"),s.innerHTML=inputValue,addTaskToTheList(e,t,s),printList(),deleteInputAndForm()}},addTaskToTheList=(e,t,s)=>{const a=document.createElement("li");a.classList.add("list","task"),a.appendChild(e),a.appendChild(t),a.appendChild(s),taskList.push(a.outerHTML),setLocalStorage()},printList=()=>{let e="";for(let t of taskList)e+=t;taskContainer.innerHTML=e,selectCheckTask()},deleteInputAndForm=()=>{inputText.value="",inputValue="",taskForm.classList.add("hide")},selectCheckTask=()=>{const e=document.querySelectorAll(".checkbox"),t=document.querySelectorAll(".custom-check"),s=document.querySelectorAll(".task-label");for(let a=0;a<e.length;a++)e[a].addEventListener("click",e=>{e.currentTarget.checked?(t[a].classList.add("checked"),s[a].classList.add("removed"),sortTasks()):(t[a].classList.remove("checked"),s[a].classList.remove("removed"),sortTasks())})},sortTasks=()=>{let e=document.querySelectorAll(".task");e=Array.from(e);const t=e.filter(e=>e.lastElementChild.classList.value.includes("removed")),s=e.filter(e=>!e.lastElementChild.classList.value.includes("removed")),a=s.pop();s.unshift(a),e=s.concat(t),displayReorderTasks(e)},displayReorderTasks=e=>{taskList=[];for(let t=0;t<e.length;t++)void 0!==e[t]&&(taskContainer.appendChild(e[t]),taskList.push(e[t].outerHTML));setLocalStorage()},setLocalStorage=()=>{localStorage.setItem("tasks",JSON.stringify(taskList))},getLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("tasks"));null===e&&addTaskToTheList(),taskList=e,printList()};addButton.addEventListener("click",()=>{taskForm.classList.remove("hide"),inputText.focus()}),closeButton.addEventListener("click",()=>{taskForm.classList.add("hide")}),inputText.addEventListener("keyup",e=>{inputValue=e.currentTarget.value}),submitButton.addEventListener("click",createElements),document.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),createElements())}),getLocalStorage();